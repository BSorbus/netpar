<% input_disabled ||= false  
   #if input_disabled is not passed to the partial it doesn't crash. 
   # We default it to false 
%>


<div class="row">
  <div class="form-group col-sm-12">
    <p><strong><%= Exam.human_attribute_name(:esod_matter_id) %></strong></p>
    <h5><%= @exam.esod_matter.present? ? @exam.esod_matter.fullname : ''%></h5>
  </div>
</div>  <!-- /row -->

<hr class="hr-without-top-margin">

<div class="row">
  <div class="col-sm-7">
    <div class="row">
      <div class="form-group col-sm-12">
        <p><strong><%= Exam.human_attribute_name(:esod_category) %></strong></p>
        <h5><%= @exam.esod_category_name %></h5>
      </div>
    </div>  <!-- /row -->

    <div class="row">
      <div class="form-group col-sm-6">
        <p><strong><%= Exam.human_attribute_name(:number) %></strong></p>
        <h5><%= @exam.number %></h5>
      </div>

      <div class="form-group col-sm-6">
        <p><strong><%= Exam.human_attribute_name(:date_exam) %></strong></p>
        <h5><%= @exam.date_exam %></h5>
      </div>
    </div>  <!-- /row -->

    <div class="row">
      <div class="form-group col-sm-12">
        <p><strong><%= Exam.human_attribute_name(:place_exam) %></strong></p>
        <h5><%= @exam.place_exam %></h5>
      </div>
    </div>  <!-- /row -->

    <hr class="hr-without-top-margin">

    <div class="row">
      <div class="form-group col-sm-6">
        <p><strong><%= Exam.human_attribute_name(:chairman) %></strong></p>
        <h5><%= @exam.chairman %></h5>
      </div>

      <div class="form-group col-sm-6">
        <p><strong><%= Exam.human_attribute_name(:secretary) %></strong></p>
        <h5><%= @exam.secretary %></h5>
      </div>
    </div>

    <div class="row">
      <div class="form-group col-sm-12">
        <p><strong>Cz≈Çonkowie komisji:</strong></p>

        <table class="table table-hover">
          <tbody>
            <% @exam.examiners.order(:name).each do |examiner| %>
              <tr>
                <td><%= examiner.name %></td>
              </tr>
            <% end %>
          </tbody>
        </table>

      </div>
    </div>


    <div class="row">
      <div class="form-group col-sm-12">
        <p><strong><%= Exam.human_attribute_name(:note) %></strong></p>
        <h5><%= @exam.note %></h5>
      </div>
    </div>



  </div> <!-- /col-sm-7 -->

  <div class="col-sm-5">

    <div class="row">
      <div class="form-group col-sm-12">
        <%  @attach = @exam.documents.where(fileattach_content_type: ['image/jpeg', 'image/png', 'application/pdf']).last %>

        <% if @attach.present? %>
          <p><strong><%= Document.human_attribute_name(:fileattach) %>: </strong><small><%= @attach.fileattach_filename %></small></p>

          <%= link_to image_tag( get_fileattach_as_image(@attach, params[:category_service]), class: "img-thumbnail" ), attachment_url(@attach, :fileattach, prefix: refile_app_path), target: "_blank" %>

        <% end %>

      </div> <!-- /form-group col-sm-12 -->

    </div> <!-- /row -->

  </div> <!-- /col-sm-6 -->
</div> <!-- /row -->

<hr class="hr-without-top-margin">


<% if input_disabled %>
  <!-- for "Show" -->
  <div class="row">
    <%= link_to t('Index', default: t("helpers.links.index")), exams_path(params[:category_service]), :class => 'btn btn-default glyphicon glyphicon-th-list' %>

    <%= link_to t('Back', default: t("helpers.links.back")), :back, :class => 'btn btn-default glyphicon glyphicon-arrow-left' %>

    <% if exam_policy_check(@exam, params[:category_service], 'destroy') %>
      <%= link_to t('Delete', default: t("helpers.links.destroy")), exam_path(@exam, category_service: @exam.category.downcase),
                          method: :delete,
                          data: { confirm: t('helpers.links.confirm_destroy', data: @exam.fullname) }, 
                          :class => "btn btn-danger glyphicon glyphicon-trash" %>
    <% end %>

    <% if exam_policy_check(@exam, params[:category_service], 'edit') %>
      <%= link_to t('Edit', default: t("helpers.links.edit")), edit_exam_path(@exam, category_service: @exam.category.downcase), 
                          :class => 'btn btn-primary glyphicon glyphicon-edit' %> 
    <% end %>

    <% if exam_policy_check(@exam, params[:category_service], 'edit') %>
      <%= link_to t('send_exam_committee_docx', default: t("helpers.links.send_exam_committee_docx")), committee_docx_exam_path(@exam, category_service: @exam.category.downcase, format: "docx"), 
                          :class => 'btn btn-info glyphicon glyphicon-retweet pull-right' %> 
    <% end %>

  </div> <!-- /row -->
<% else %>
  <!-- form "New"/"Edit" -->
<% end %>
